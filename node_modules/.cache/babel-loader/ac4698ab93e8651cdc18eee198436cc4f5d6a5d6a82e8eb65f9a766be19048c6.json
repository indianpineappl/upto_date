{"ast":null,"code":"var _TwitterService;\nimport axios from 'axios';\nexport class TwitterService {\n  constructor() {\n    this.baseUrl = void 0;\n    this.apiKey = void 0;\n    this.bearerToken = void 0;\n    this.baseUrl = 'https://api.twitter.com/2';\n    this.apiKey = process.env.REACT_APP_TWITTER_API_KEY || '';\n    this.bearerToken = process.env.REACT_APP_TWITTER_BEARER_TOKEN || '';\n  }\n  static getInstance() {\n    if (!TwitterService.instance) {\n      TwitterService.instance = new TwitterService();\n    }\n    return TwitterService.instance;\n  }\n\n  /**\n   * Get trending topics for a location\n   */\n  async getTrendingTopics(lat, lng) {\n    try {\n      // For now, we'll use worldwide trends since getting location-specific trends\n      // requires a WOEID (Where On Earth ID) which we would need to obtain separately\n      const response = await axios.get(`${this.baseUrl}/trends`, {\n        headers: {\n          'Authorization': `Bearer ${this.bearerToken}`\n        },\n        params: {\n          id: 1 // Worldwide WOEID\n        }\n      });\n\n      // Transform Twitter API response to our Topic format\n      return response.data.data.map((trend, index) => ({\n        id: `twitter-${index}`,\n        title: trend.name,\n        summary: `Trending topic on Twitter with ${trend.tweet_volume || 0} tweets`,\n        tweetCount: trend.tweet_volume || 0,\n        trendScore: trend.tweet_volume ? Math.min(trend.tweet_volume / 1000, 100) : 0,\n        influentialAccounts: [],\n        subTopics: [{\n          id: `twitter-${index}-1`,\n          title: `Recent discussions about ${trend.name}`,\n          summary: `Latest conversations and mentions of ${trend.name} on Twitter`\n        }]\n      }));\n    } catch (error) {\n      console.error('Error fetching Twitter trends:', error);\n      // Fallback to mock data if API call fails\n      return [{\n        id: 'twitter-1',\n        title: 'Tech Innovation',\n        summary: 'Latest developments in technology and innovation',\n        tweetCount: 15420,\n        trendScore: 95,\n        influentialAccounts: ['@techreview', '@innovate'],\n        subTopics: [{\n          id: 'twitter-1-1',\n          title: 'AI Breakthroughs',\n          summary: 'New advancements in artificial intelligence and machine learning'\n        }, {\n          id: 'twitter-1-2',\n          title: 'Quantum Computing',\n          summary: 'Progress in quantum computing research and applications'\n        }]\n      }, {\n        id: 'twitter-2',\n        title: 'Climate Action',\n        summary: 'Global and local initiatives for climate change mitigation',\n        tweetCount: 12350,\n        trendScore: 88,\n        influentialAccounts: ['@climateorg', '@greenfuture'],\n        subTopics: [{\n          id: 'twitter-2-1',\n          title: 'Renewable Energy',\n          summary: 'Advancements in solar, wind, and other renewable energy sources'\n        }, {\n          id: 'twitter-2-2',\n          title: 'Policy Changes',\n          summary: 'New environmental policies and their impact'\n        }]\n      }];\n    }\n  }\n\n  /**\n   * Search for tweets related to a topic\n   */\n  async searchTweets(query, count = 10) {\n    try {\n      const response = await axios.get(`${this.baseUrl}/tweets/search/recent`, {\n        headers: {\n          'Authorization': `Bearer ${this.bearerToken}`\n        },\n        params: {\n          query: query,\n          max_results: count,\n          'tweet.fields': 'author_id,public_metrics,created_at'\n        }\n      });\n      return response.data.data || [];\n    } catch (error) {\n      console.error('Error searching tweets:', error);\n      // Return mock data if API call fails\n      return [{\n        id: 'tweet-1',\n        text: `Just read an amazing article about ${query}! The future looks bright. #innovation`,\n        author_id: 'techenthusiast',\n        public_metrics: {\n          retweet_count: 42,\n          like_count: 120\n        },\n        created_at: new Date(Date.now() - 3600000).toISOString()\n      }, {\n        id: 'tweet-2',\n        text: `Can't believe the progress in ${query} this year. Mind-blowing developments!`,\n        author_id: 'futurist',\n        public_metrics: {\n          retweet_count: 28,\n          like_count: 87\n        },\n        created_at: new Date(Date.now() - 7200000).toISOString()\n      }];\n    }\n  }\n\n  /**\n   * Get influential accounts tweeting about a topic\n   */\n  async getInfluentialAccounts(topic) {\n    // In a real implementation, we would search for users who frequently tweet about the topic\n    // and have high follower counts or engagement rates\n    try {\n      var _response$data$data;\n      const response = await axios.get(`${this.baseUrl}/users/by`, {\n        headers: {\n          'Authorization': `Bearer ${this.bearerToken}`\n        },\n        params: {\n          usernames: 'twitterdev,twitterapi',\n          // Example accounts\n          'user.fields': 'public_metrics'\n        }\n      });\n      return ((_response$data$data = response.data.data) === null || _response$data$data === void 0 ? void 0 : _response$data$data.map(user => `@${user.username}`)) || [];\n    } catch (error) {\n      console.error('Error fetching influential accounts:', error);\n      // Return mock data if API call fails\n      return ['@techreview', '@innovate', '@futuretech', '@digitaltrends'];\n    }\n  }\n}\n_TwitterService = TwitterService;\nTwitterService.instance = void 0;\nexport default TwitterService.getInstance();","map":{"version":3,"names":["axios","TwitterService","constructor","baseUrl","apiKey","bearerToken","process","env","REACT_APP_TWITTER_API_KEY","REACT_APP_TWITTER_BEARER_TOKEN","getInstance","instance","getTrendingTopics","lat","lng","response","get","headers","params","id","data","map","trend","index","title","name","summary","tweet_volume","tweetCount","trendScore","Math","min","influentialAccounts","subTopics","error","console","searchTweets","query","count","max_results","text","author_id","public_metrics","retweet_count","like_count","created_at","Date","now","toISOString","getInfluentialAccounts","topic","_response$data$data","usernames","user","username","_TwitterService"],"sources":["/Users/ab/CascadeProjects/Upto date app/src/services/twitterService.ts"],"sourcesContent":["import axios from 'axios';\nimport { Topic } from '../types';\n\nexport interface TwitterTrend {\n  name: string;\n  tweet_volume: number;\n  url: string;\n}\n\nexport interface TwitterTopic extends Topic {\n  tweetCount?: number;\n  trendScore?: number;\n  influentialAccounts?: string[];\n}\n\nexport class TwitterService {\n  private static instance: TwitterService;\n  private baseUrl: string;\n  private apiKey: string;\n  private bearerToken: string;\n  \n  private constructor() {\n    this.baseUrl = 'https://api.twitter.com/2';\n    this.apiKey = process.env.REACT_APP_TWITTER_API_KEY || '';\n    this.bearerToken = process.env.REACT_APP_TWITTER_BEARER_TOKEN || '';\n  }\n  \n  public static getInstance(): TwitterService {\n    if (!TwitterService.instance) {\n      TwitterService.instance = new TwitterService();\n    }\n    return TwitterService.instance;\n  }\n  \n  /**\n   * Get trending topics for a location\n   */\n  public async getTrendingTopics(lat?: number, lng?: number): Promise<TwitterTopic[]> {\n    try {\n      // For now, we'll use worldwide trends since getting location-specific trends\n      // requires a WOEID (Where On Earth ID) which we would need to obtain separately\n      const response = await axios.get(`${this.baseUrl}/trends`, {\n        headers: {\n          'Authorization': `Bearer ${this.bearerToken}`\n        },\n        params: {\n          id: 1 // Worldwide WOEID\n        }\n      });\n      \n      // Transform Twitter API response to our Topic format\n      return response.data.data.map((trend: any, index: number) => ({\n        id: `twitter-${index}`,\n        title: trend.name,\n        summary: `Trending topic on Twitter with ${trend.tweet_volume || 0} tweets`,\n        tweetCount: trend.tweet_volume || 0,\n        trendScore: trend.tweet_volume ? Math.min(trend.tweet_volume / 1000, 100) : 0,\n        influentialAccounts: [],\n        subTopics: [\n          {\n            id: `twitter-${index}-1`,\n            title: `Recent discussions about ${trend.name}`,\n            summary: `Latest conversations and mentions of ${trend.name} on Twitter`\n          }\n        ]\n      }));\n    } catch (error) {\n      console.error('Error fetching Twitter trends:', error);\n      // Fallback to mock data if API call fails\n      return [\n        {\n          id: 'twitter-1',\n          title: 'Tech Innovation',\n          summary: 'Latest developments in technology and innovation',\n          tweetCount: 15420,\n          trendScore: 95,\n          influentialAccounts: ['@techreview', '@innovate'],\n          subTopics: [\n            { \n              id: 'twitter-1-1', \n              title: 'AI Breakthroughs', \n              summary: 'New advancements in artificial intelligence and machine learning' \n            },\n            { \n              id: 'twitter-1-2', \n              title: 'Quantum Computing', \n              summary: 'Progress in quantum computing research and applications' \n            }\n          ]\n        },\n        {\n          id: 'twitter-2',\n          title: 'Climate Action',\n          summary: 'Global and local initiatives for climate change mitigation',\n          tweetCount: 12350,\n          trendScore: 88,\n          influentialAccounts: ['@climateorg', '@greenfuture'],\n          subTopics: [\n            { \n              id: 'twitter-2-1', \n              title: 'Renewable Energy', \n              summary: 'Advancements in solar, wind, and other renewable energy sources' \n            },\n            { \n              id: 'twitter-2-2', \n              title: 'Policy Changes', \n              summary: 'New environmental policies and their impact' \n            }\n          ]\n        }\n      ];\n    }\n  }\n  \n  /**\n   * Search for tweets related to a topic\n   */\n  public async searchTweets(query: string, count: number = 10): Promise<any[]> {\n    try {\n      const response = await axios.get(`${this.baseUrl}/tweets/search/recent`, {\n        headers: {\n          'Authorization': `Bearer ${this.bearerToken}`\n        },\n        params: {\n          query: query,\n          max_results: count,\n          'tweet.fields': 'author_id,public_metrics,created_at'\n        }\n      });\n      \n      return response.data.data || [];\n    } catch (error) {\n      console.error('Error searching tweets:', error);\n      // Return mock data if API call fails\n      return [\n        {\n          id: 'tweet-1',\n          text: `Just read an amazing article about ${query}! The future looks bright. #innovation`,\n          author_id: 'techenthusiast',\n          public_metrics: {\n            retweet_count: 42,\n            like_count: 120\n          },\n          created_at: new Date(Date.now() - 3600000).toISOString()\n        },\n        {\n          id: 'tweet-2',\n          text: `Can't believe the progress in ${query} this year. Mind-blowing developments!`,\n          author_id: 'futurist',\n          public_metrics: {\n            retweet_count: 28,\n            like_count: 87\n          },\n          created_at: new Date(Date.now() - 7200000).toISOString()\n        }\n      ];\n    }\n  }\n  \n  /**\n   * Get influential accounts tweeting about a topic\n   */\n  public async getInfluentialAccounts(topic: string): Promise<string[]> {\n    // In a real implementation, we would search for users who frequently tweet about the topic\n    // and have high follower counts or engagement rates\n    try {\n      const response = await axios.get(`${this.baseUrl}/users/by`, {\n        headers: {\n          'Authorization': `Bearer ${this.bearerToken}`\n        },\n        params: {\n          usernames: 'twitterdev,twitterapi', // Example accounts\n          'user.fields': 'public_metrics'\n        }\n      });\n      \n      return response.data.data?.map((user: any) => `@${user.username}`) || [];\n    } catch (error) {\n      console.error('Error fetching influential accounts:', error);\n      // Return mock data if API call fails\n      return [\n        '@techreview',\n        '@innovate',\n        '@futuretech',\n        '@digitaltrends'\n      ];\n    }\n  }\n}\n\nexport default TwitterService.getInstance();\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}