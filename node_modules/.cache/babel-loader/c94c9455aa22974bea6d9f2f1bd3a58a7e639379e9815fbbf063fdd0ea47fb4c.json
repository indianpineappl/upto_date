{"ast":null,"code":"var _TwitterService;import axios from'axios';export class TwitterService{constructor(){this.baseUrl=void 0;this.apiKey=void 0;this.bearerToken=void 0;this.baseUrl='https://api.twitter.com/2';this.apiKey=process.env.REACT_APP_TWITTER_API_KEY||'';this.bearerToken=process.env.REACT_APP_TWITTER_BEARER_TOKEN||'';}static getInstance(){if(!TwitterService.instance){TwitterService.instance=new TwitterService();}return TwitterService.instance;}/**\n   * Get trending topics for a location\n   */async getTrendingTopics(lat,lng){try{// For now, we'll use worldwide trends since getting location-specific trends\n// requires a WOEID (Where On Earth ID) which we would need to obtain separately\nconst response=await axios.get(\"\".concat(this.baseUrl,\"/trends\"),{headers:{'Authorization':\"Bearer \".concat(this.bearerToken)},params:{id:1// Worldwide WOEID\n}});// Transform Twitter API response to our Topic format\nreturn response.data.data.map((trend,index)=>({id:\"twitter-\".concat(index),title:trend.name,summary:\"Trending topic on Twitter with \".concat(trend.tweet_volume||0,\" tweets\"),tweetCount:trend.tweet_volume||0,trendScore:trend.tweet_volume?Math.min(trend.tweet_volume/1000,100):0,influentialAccounts:[],subTopics:[{id:\"twitter-\".concat(index,\"-1\"),title:\"Recent discussions about \".concat(trend.name),summary:\"Latest conversations and mentions of \".concat(trend.name,\" on Twitter\")}]}));}catch(error){console.error('Error fetching Twitter trends:',error);// Fallback to mock data if API call fails\nreturn[{id:'twitter-1',title:'Tech Innovation',summary:'Latest developments in technology and innovation',tweetCount:15420,trendScore:95,influentialAccounts:['@techreview','@innovate'],subTopics:[{id:'twitter-1-1',title:'AI Breakthroughs',summary:'New advancements in artificial intelligence and machine learning'},{id:'twitter-1-2',title:'Quantum Computing',summary:'Progress in quantum computing research and applications'}]},{id:'twitter-2',title:'Climate Action',summary:'Global and local initiatives for climate change mitigation',tweetCount:12350,trendScore:88,influentialAccounts:['@climateorg','@greenfuture'],subTopics:[{id:'twitter-2-1',title:'Renewable Energy',summary:'Advancements in solar, wind, and other renewable energy sources'},{id:'twitter-2-2',title:'Policy Changes',summary:'New environmental policies and their impact'}]}];}}/**\n   * Search for tweets related to a topic\n   */async searchTweets(query){let count=arguments.length>1&&arguments[1]!==undefined?arguments[1]:10;try{const response=await axios.get(\"\".concat(this.baseUrl,\"/tweets/search/recent\"),{headers:{'Authorization':\"Bearer \".concat(this.bearerToken)},params:{query:query,max_results:count,'tweet.fields':'author_id,public_metrics,created_at'}});return response.data.data||[];}catch(error){console.error('Error searching tweets:',error);// Return mock data if API call fails\nreturn[{id:'tweet-1',text:\"Just read an amazing article about \".concat(query,\"! The future looks bright. #innovation\"),author_id:'techenthusiast',public_metrics:{retweet_count:42,like_count:120},created_at:new Date(Date.now()-3600000).toISOString()},{id:'tweet-2',text:\"Can't believe the progress in \".concat(query,\" this year. Mind-blowing developments!\"),author_id:'futurist',public_metrics:{retweet_count:28,like_count:87},created_at:new Date(Date.now()-7200000).toISOString()}];}}/**\n   * Get influential accounts tweeting about a topic\n   */async getInfluentialAccounts(topic){// In a real implementation, we would search for users who frequently tweet about the topic\n// and have high follower counts or engagement rates\ntry{var _response$data$data;const response=await axios.get(\"\".concat(this.baseUrl,\"/users/by\"),{headers:{'Authorization':\"Bearer \".concat(this.bearerToken)},params:{usernames:'twitterdev,twitterapi',// Example accounts\n'user.fields':'public_metrics'}});return((_response$data$data=response.data.data)===null||_response$data$data===void 0?void 0:_response$data$data.map(user=>\"@\".concat(user.username)))||[];}catch(error){console.error('Error fetching influential accounts:',error);// Return mock data if API call fails\nreturn['@techreview','@innovate','@futuretech','@digitaltrends'];}}}_TwitterService=TwitterService;TwitterService.instance=void 0;export default TwitterService.getInstance();","map":{"version":3,"names":["axios","TwitterService","constructor","baseUrl","apiKey","bearerToken","process","env","REACT_APP_TWITTER_API_KEY","REACT_APP_TWITTER_BEARER_TOKEN","getInstance","instance","getTrendingTopics","lat","lng","response","get","concat","headers","params","id","data","map","trend","index","title","name","summary","tweet_volume","tweetCount","trendScore","Math","min","influentialAccounts","subTopics","error","console","searchTweets","query","count","arguments","length","undefined","max_results","text","author_id","public_metrics","retweet_count","like_count","created_at","Date","now","toISOString","getInfluentialAccounts","topic","_response$data$data","usernames","user","username","_TwitterService"],"sources":["/Users/ab/CascadeProjects/Upto date app/src/services/twitterService.ts"],"sourcesContent":["import axios from 'axios';\nimport { Topic } from '../types';\n\nexport interface TwitterTrend {\n  name: string;\n  tweet_volume: number;\n  url: string;\n}\n\nexport interface TwitterTopic extends Topic {\n  tweetCount?: number;\n  trendScore?: number;\n  influentialAccounts?: string[];\n}\n\nexport class TwitterService {\n  private static instance: TwitterService;\n  private baseUrl: string;\n  private apiKey: string;\n  private bearerToken: string;\n  \n  private constructor() {\n    this.baseUrl = 'https://api.twitter.com/2';\n    this.apiKey = process.env.REACT_APP_TWITTER_API_KEY || '';\n    this.bearerToken = process.env.REACT_APP_TWITTER_BEARER_TOKEN || '';\n  }\n  \n  public static getInstance(): TwitterService {\n    if (!TwitterService.instance) {\n      TwitterService.instance = new TwitterService();\n    }\n    return TwitterService.instance;\n  }\n  \n  /**\n   * Get trending topics for a location\n   */\n  public async getTrendingTopics(lat?: number, lng?: number): Promise<TwitterTopic[]> {\n    try {\n      // For now, we'll use worldwide trends since getting location-specific trends\n      // requires a WOEID (Where On Earth ID) which we would need to obtain separately\n      const response = await axios.get(`${this.baseUrl}/trends`, {\n        headers: {\n          'Authorization': `Bearer ${this.bearerToken}`\n        },\n        params: {\n          id: 1 // Worldwide WOEID\n        }\n      });\n      \n      // Transform Twitter API response to our Topic format\n      return response.data.data.map((trend: any, index: number) => ({\n        id: `twitter-${index}`,\n        title: trend.name,\n        summary: `Trending topic on Twitter with ${trend.tweet_volume || 0} tweets`,\n        tweetCount: trend.tweet_volume || 0,\n        trendScore: trend.tweet_volume ? Math.min(trend.tweet_volume / 1000, 100) : 0,\n        influentialAccounts: [],\n        subTopics: [\n          {\n            id: `twitter-${index}-1`,\n            title: `Recent discussions about ${trend.name}`,\n            summary: `Latest conversations and mentions of ${trend.name} on Twitter`\n          }\n        ]\n      }));\n    } catch (error) {\n      console.error('Error fetching Twitter trends:', error);\n      // Fallback to mock data if API call fails\n      return [\n        {\n          id: 'twitter-1',\n          title: 'Tech Innovation',\n          summary: 'Latest developments in technology and innovation',\n          tweetCount: 15420,\n          trendScore: 95,\n          influentialAccounts: ['@techreview', '@innovate'],\n          subTopics: [\n            { \n              id: 'twitter-1-1', \n              title: 'AI Breakthroughs', \n              summary: 'New advancements in artificial intelligence and machine learning' \n            },\n            { \n              id: 'twitter-1-2', \n              title: 'Quantum Computing', \n              summary: 'Progress in quantum computing research and applications' \n            }\n          ]\n        },\n        {\n          id: 'twitter-2',\n          title: 'Climate Action',\n          summary: 'Global and local initiatives for climate change mitigation',\n          tweetCount: 12350,\n          trendScore: 88,\n          influentialAccounts: ['@climateorg', '@greenfuture'],\n          subTopics: [\n            { \n              id: 'twitter-2-1', \n              title: 'Renewable Energy', \n              summary: 'Advancements in solar, wind, and other renewable energy sources' \n            },\n            { \n              id: 'twitter-2-2', \n              title: 'Policy Changes', \n              summary: 'New environmental policies and their impact' \n            }\n          ]\n        }\n      ];\n    }\n  }\n  \n  /**\n   * Search for tweets related to a topic\n   */\n  public async searchTweets(query: string, count: number = 10): Promise<any[]> {\n    try {\n      const response = await axios.get(`${this.baseUrl}/tweets/search/recent`, {\n        headers: {\n          'Authorization': `Bearer ${this.bearerToken}`\n        },\n        params: {\n          query: query,\n          max_results: count,\n          'tweet.fields': 'author_id,public_metrics,created_at'\n        }\n      });\n      \n      return response.data.data || [];\n    } catch (error) {\n      console.error('Error searching tweets:', error);\n      // Return mock data if API call fails\n      return [\n        {\n          id: 'tweet-1',\n          text: `Just read an amazing article about ${query}! The future looks bright. #innovation`,\n          author_id: 'techenthusiast',\n          public_metrics: {\n            retweet_count: 42,\n            like_count: 120\n          },\n          created_at: new Date(Date.now() - 3600000).toISOString()\n        },\n        {\n          id: 'tweet-2',\n          text: `Can't believe the progress in ${query} this year. Mind-blowing developments!`,\n          author_id: 'futurist',\n          public_metrics: {\n            retweet_count: 28,\n            like_count: 87\n          },\n          created_at: new Date(Date.now() - 7200000).toISOString()\n        }\n      ];\n    }\n  }\n  \n  /**\n   * Get influential accounts tweeting about a topic\n   */\n  public async getInfluentialAccounts(topic: string): Promise<string[]> {\n    // In a real implementation, we would search for users who frequently tweet about the topic\n    // and have high follower counts or engagement rates\n    try {\n      const response = await axios.get(`${this.baseUrl}/users/by`, {\n        headers: {\n          'Authorization': `Bearer ${this.bearerToken}`\n        },\n        params: {\n          usernames: 'twitterdev,twitterapi', // Example accounts\n          'user.fields': 'public_metrics'\n        }\n      });\n      \n      return response.data.data?.map((user: any) => `@${user.username}`) || [];\n    } catch (error) {\n      console.error('Error fetching influential accounts:', error);\n      // Return mock data if API call fails\n      return [\n        '@techreview',\n        '@innovate',\n        '@futuretech',\n        '@digitaltrends'\n      ];\n    }\n  }\n}\n\nexport default TwitterService.getInstance();\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}