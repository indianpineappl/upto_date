{"ast":null,"code":"import{useState,useEffect}from'react';import locationService from'../services/locationService';const useLocation=()=>{const[location,setLocation]=useState(null);const[loading,setLoading]=useState(false);const[error,setError]=useState(null);const requestLocation=()=>{setLoading(true);setError(null);locationService.getCurrentLocation().then(locationData=>{setLocation(locationData);setLoading(false);}).catch(err=>{setError(err.message);setLoading(false);});};useEffect(()=>{// Request location on component mount\nrequestLocation();// Set up position watcher\nlet watchId;try{watchId=locationService.watchPosition(newLocation=>{setLocation(newLocation);});}catch(err){setError(err.message);}// Clean up watcher on unmount\nreturn()=>{if(watchId){locationService.clearWatch(watchId);}};},[]);return{location,loading,error,requestLocation};};export default useLocation;","map":{"version":3,"names":["useState","useEffect","locationService","useLocation","location","setLocation","loading","setLoading","error","setError","requestLocation","getCurrentLocation","then","locationData","catch","err","message","watchId","watchPosition","newLocation","clearWatch"],"sources":["/Users/ab/CascadeProjects/Upto date app/src/hooks/useLocation.ts"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport locationService, { LocationService } from '../services/locationService';\nimport { LocationData } from '../types';\n\ninterface UseLocationResult {\n  location: LocationData | null;\n  loading: boolean;\n  error: string | null;\n  requestLocation: () => void;\n}\n\nconst useLocation = (): UseLocationResult => {\n  const [location, setLocation] = useState<LocationData | null>(null);\n  const [loading, setLoading] = useState<boolean>(false);\n  const [error, setError] = useState<string | null>(null);\n  \n  const requestLocation = () => {\n    setLoading(true);\n    setError(null);\n    \n    locationService.getCurrentLocation()\n      .then(locationData => {\n        setLocation(locationData);\n        setLoading(false);\n      })\n      .catch(err => {\n        setError(err.message);\n        setLoading(false);\n      });\n  };\n  \n  useEffect(() => {\n    // Request location on component mount\n    requestLocation();\n    \n    // Set up position watcher\n    let watchId: number;\n    try {\n      watchId = locationService.watchPosition((newLocation) => {\n        setLocation(newLocation);\n      });\n    } catch (err) {\n      setError(err.message);\n    }\n    \n    // Clean up watcher on unmount\n    return () => {\n      if (watchId) {\n        locationService.clearWatch(watchId);\n      }\n    };\n  }, []);\n  \n  return {\n    location,\n    loading,\n    error,\n    requestLocation\n  };\n};\n\nexport default useLocation;\n"],"mappings":"AAAA,OAASA,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAC3C,MAAO,CAAAC,eAAe,KAA2B,6BAA6B,CAU9E,KAAM,CAAAC,WAAW,CAAGA,CAAA,GAAyB,CAC3C,KAAM,CAACC,QAAQ,CAAEC,WAAW,CAAC,CAAGL,QAAQ,CAAsB,IAAI,CAAC,CACnE,KAAM,CAACM,OAAO,CAAEC,UAAU,CAAC,CAAGP,QAAQ,CAAU,KAAK,CAAC,CACtD,KAAM,CAACQ,KAAK,CAAEC,QAAQ,CAAC,CAAGT,QAAQ,CAAgB,IAAI,CAAC,CAEvD,KAAM,CAAAU,eAAe,CAAGA,CAAA,GAAM,CAC5BH,UAAU,CAAC,IAAI,CAAC,CAChBE,QAAQ,CAAC,IAAI,CAAC,CAEdP,eAAe,CAACS,kBAAkB,CAAC,CAAC,CACjCC,IAAI,CAACC,YAAY,EAAI,CACpBR,WAAW,CAACQ,YAAY,CAAC,CACzBN,UAAU,CAAC,KAAK,CAAC,CACnB,CAAC,CAAC,CACDO,KAAK,CAACC,GAAG,EAAI,CACZN,QAAQ,CAACM,GAAG,CAACC,OAAO,CAAC,CACrBT,UAAU,CAAC,KAAK,CAAC,CACnB,CAAC,CAAC,CACN,CAAC,CAEDN,SAAS,CAAC,IAAM,CACd;AACAS,eAAe,CAAC,CAAC,CAEjB;AACA,GAAI,CAAAO,OAAe,CACnB,GAAI,CACFA,OAAO,CAAGf,eAAe,CAACgB,aAAa,CAAEC,WAAW,EAAK,CACvDd,WAAW,CAACc,WAAW,CAAC,CAC1B,CAAC,CAAC,CACJ,CAAE,MAAOJ,GAAG,CAAE,CACZN,QAAQ,CAACM,GAAG,CAACC,OAAO,CAAC,CACvB,CAEA;AACA,MAAO,IAAM,CACX,GAAIC,OAAO,CAAE,CACXf,eAAe,CAACkB,UAAU,CAACH,OAAO,CAAC,CACrC,CACF,CAAC,CACH,CAAC,CAAE,EAAE,CAAC,CAEN,MAAO,CACLb,QAAQ,CACRE,OAAO,CACPE,KAAK,CACLE,eACF,CAAC,CACH,CAAC,CAED,cAAe,CAAAP,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}